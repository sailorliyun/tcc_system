#
#
#  ‚g‚t‚k‚e‚sí’“ƒvƒƒZƒX‚ð‹N“®‚·‚éB(QUAJ_HULSTART.BAT)
#
#     ‹@  ”\F‚g‚t‚k‚e‚sí’“ƒvƒƒZƒX‚ð‹N“®‚·‚éB
#
#     ˆø  ”F
#
#     EXIT’lF0 --- ³í
#             1 --- ƒGƒ‰[”­¶
#
set  MODULE   = QUAJ_HULSTART.BAT                          # ƒ‚ƒWƒ…[ƒ‹–¼
set  LOGFILE  = $USER_LOG_DIR/db_ope.log                # ƒƒOƒtƒ@ƒCƒ‹–¼
set  LOGWRITE = "$EXE_DIR/QUAJ_BATCHLOG.BAT ($MODULE)"  # ƒƒOo—Í—p‹¤’ÊƒVƒFƒ‹

$LOGWRITE  "‚g‚t‚k‚e‚sí’“ƒvƒƒZƒX‹N“®ŠJŽn" >> $LOGFILE

#############################
# 1. —v‹Žó•tƒf[ƒ‚ƒ“‹N“®	#
#############################
set PRCNUM = `ps -ef | grep -v 'grep' | grep -c "hulobsd"`
if ( $PRCNUM == 0 ) then
	hulobsd
	set RC = $status
	if ( $RC != 0 ) then
		$LOGWRITE  "‚g‚t‚k‚e‚sí’“F—v‹Žó•tƒf[ƒ‚ƒ“‹N“®ˆÙí(hulobsd) : [RC:$RC]" >> $LOGFILE
		exit 1
	endif
endif

#############################
# 2. ”zMƒf[ƒ‚ƒ“‹N“®		#
#############################
set PRCNUM = `ps -ef | grep -v 'grep' | grep -c "hulsndd"`
if ( $PRCNUM == 0 ) then
	hulsndd
	set RC = $status
	if ( $RC != 0 ) then
		$LOGWRITE  "‚g‚t‚k‚e‚sí’“F”zMƒf[ƒ‚ƒ“‹N“®ˆÙí(hulsndd) : [RC:$RC]" >> $LOGFILE
		exit 1
	endif
endif

#############################
# 3. WMƒf[ƒ‚ƒ“‹N“®		#
#############################
set PRCNUM = `ps -ef | grep -v 'grep' | grep -c "hulrcvd"`
if ( $PRCNUM == 0 ) then
	hulrcvd
	set RC = $status
	if ( $RC != 0 ) then
		$LOGWRITE  "‚g‚t‚k‚e‚sí’“FWMƒf[ƒ‚ƒ“‹N“®ˆÙí(hulrcvd) : [RC:$RC]" >> $LOGFILE
		exit 1
	endif
endif

sleep 10

#############################
# 4. ƒf[ƒ‚ƒ“‹N“®ƒ`ƒFƒbƒN	#
#############################
set PRCNUM = `ps -ef | grep -v 'grep' | grep -c "hulobsd"`
if ( $PRCNUM != 1 ) then
	$LOGWRITE  "‚g‚t‚k‚e‚sí’“F—v‹Žó•tƒf[ƒ‚ƒ“‹N“®ˆÙí[hulobsd] " >> $LOGFILE
    exit 1
endif
set PRCNUM = `ps -ef | grep -v 'grep' | grep -c "hulsndd"`
if ( $PRCNUM != 1 ) then
	$LOGWRITE  "‚g‚t‚k‚e‚sí’“F”zMƒf[ƒ‚ƒ“‹N“®ˆÙí[hulsndd] " >> $LOGFILE
    exit 1
endif
set PRCNUM = `ps -ef | grep -v 'grep' | grep -c "hulrcvd"`
if ( $PRCNUM != 1 ) then
	$LOGWRITE  "‚g‚t‚k‚e‚sí’“FWMƒf[ƒ‚ƒ“‹N“®ˆÙí[hulrcvd] " >> $LOGFILE
    exit 1
endif

$LOGWRITE  "‚g‚t‚k‚e‚sí’“ƒvƒƒZƒX‹N“®³íI—¹" >> $LOGFILE

exit 0
