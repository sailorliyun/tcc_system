#!/bin/csh
#　スクリプト名  ： QTTJF1UX
#　 機  能       ： ＨＵＬＦＴ処理（会員基本情報ファイル）
#　 作成者       ： FIP
#　修　正　履　歴： サブレンジ追加に伴う修正 IMZ.YAMADA 2004/09/28
#　　　　　　　　： 終了ログ出力追加        IMZ.YOSHIDA 2005/08/02
#　　　　　　　　： ディレクトリ変更        IMZ.YOSHIDA 2005/10/26
#                   1102086 顧客分析用の会員属性データのレイアウト変更 imz.Yoshida 2011/05/26
#------------------------------------------------------#
# 環境設定                                             #
#------------------------------------------------------#
setenv JOBNET_ID    QTT4C1UX                           # ジョブネット名
setenv JOB_ID       QTTJF1UX                           # ジョブ名
setenv USERKEY      QTTJF1UX                           # ユーザキー
# mod by IMZ.YOSHIDA 2005/10/26 ==>
#set    HULFT_DIR1 = (/d290/UFS/data/qta)               # HULFT受信ＤＩＲ１
set    HULFT_DIR1 = (/d371/UFS/data/qta)               # HULFT受信ＤＩＲ１
# mod by IMZ.YOSHIDA 2005/10/26 <==
set    HULFT_DIR2 = (/d311/UFS/data/qta)               # HULFT受信ＤＩＲ２
#
#et    LOGFILE    = $USER_LOG_DIR/${JOB_ID}.log        # ログファイル名
set    LOGWRITE   = $EXE_DIR/QUAJ_MSGLOG.BAT           # ログ出力モジュール
#------------------------------------------------------#
##1○ＨＵＬＦＴ送信（会員基本情報ファイル）      s008000#OFQY38
##2  ＨＵＬＦＴ送信（会員家族情報ファイル）      s008100#OFQY39
##3  ＨＵＬＦＴ送信（入会管理ファイル）          s008200#OFQY40
##4  ＨＵＬＦＴ送信（当月利用サマリファイル）    s008500#OFQY41
##5  ＨＵＬＦＴ送信（当月利用伝票情報ファイル）  s008300#OFQY42
##6  ＨＵＬＦＴ送信（当月利用行情報ファイル）    s008400#OFQY43
#1○ＨＵＬＦＴ送信（会員基本情報ファイル）      s008000#OFQY61〜64
#2  ＨＵＬＦＴ送信（会員家族情報ファイル）      s008100#OFQY67
#3  ＨＵＬＦＴ送信（当月利用サマリファイル）    s008500#OFQY68
#4  ＨＵＬＦＴ送信（当月利用伝票情報ファイル）  s008300#OFQY69
#5  ＨＵＬＦＴ送信（当月利用行情報ファイル）    s008400#OFQY70
#------------------------------------------------------#
# STEP-1                                               #
#------------------------------------------------------#
set    MODULE     = HULFT                              # モジュール名
set    KINOU      = 'ＨＵＬＦＴ送信（会員基本情報ファイル）'
$LOGWRITE "$MODULE" I "開始:$KINOU" "$USERKEY"         # 開始メッセージの出力
#------------------------------------------------------#
echo "***<< STR > (`date +%y%m%d`/`date +%H%M%S`) >>***"
ls -l  $HULFT_DIR1/qtab_s008000.dat?
#------------------------------------------------------#
# mod 2011/05/26 1102086 レイアウト変更対応 Start
#mv     $HULFT_DIR1/qtab_s008000.dat1   $HULFT_DIR1/O.F.QY38.hft
mv     $HULFT_DIR1/qtab_s008000.dat1   $HULFT_DIR1/O.F.QY61.hft
# mod 2011/05/26 1102086 レイアウト変更対応 End
set rc = $status
if $rc != 0 then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU mv1 RC=[$rc]"  "$USERKEY"
    echo "***<< mv1 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
# mod 2011/05/26 1102086 レイアウト変更対応 Start
#utlsend -f OFQY38 -sync
utlsend -f OFQY61 -sync
# mod 2011/05/26 1102086 レイアウト変更対応 End
set rc = $status
if ( $rc != 0 ) then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU utlsend1 RC=[$rc]"  "$USERKEY"
    echo "***<< utlsend1 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
# mod 2011/05/26 1102086 レイアウト変更対応 Start
#mv     $HULFT_DIR1/O.F.QY38.hft        $HULFT_DIR1/qtab_s008000.dat1
mv     $HULFT_DIR1/O.F.QY61.hft        $HULFT_DIR1/qtab_s008000.dat1
# mod 2011/05/26 1102086 レイアウト変更対応 End
if $rc != 0 then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU mv2 RC=[$rc]"  "$USERKEY"
    echo "***<< mv2 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
compress     -f    $HULFT_DIR1/qtab_s008000.dat1
set rc = $status
if $rc != 0 then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU compress1 RC=[$rc]"  "$USERKEY"
    echo "***<< compress1 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
# mod 2011/05/26 1102086 レイアウト変更対応 Start
#mv     $HULFT_DIR1/qtab_s008000.dat2   $HULFT_DIR1/O.F.QY38.hft
mv     $HULFT_DIR1/qtab_s008000.dat2   $HULFT_DIR1/O.F.QY62.hft
# mod 2011/05/26 1102086 レイアウト変更対応 End
set rc = $status
if $rc != 0 then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU mv3 RC=[$rc]"  "$USERKEY"
    echo "***<< mv3 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
# mod 2011/05/26 1102086 レイアウト変更対応 Start
#utlsend -f OFQY38 -sync
utlsend -f OFQY62 -sync
# mod 2011/05/26 1102086 レイアウト変更対応 End
set rc = $status
if ( $rc != 0 ) then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU utlsend2 RC=[$rc]"  "$USERKEY"
    echo "***<< utlsend2 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
# mod 2011/05/26 1102086 レイアウト変更対応 Start
#mv     $HULFT_DIR1/O.F.QY38.hft        $HULFT_DIR1/qtab_s008000.dat2
mv     $HULFT_DIR1/O.F.QY62.hft        $HULFT_DIR1/qtab_s008000.dat2
# mod 2011/05/26 1102086 レイアウト変更対応 End
if $rc != 0 then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU mv4 RC=[$rc]"  "$USERKEY"
    echo "***<< mv4 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
compress     -f    $HULFT_DIR1/qtab_s008000.dat2
set rc = $status
if $rc != 0 then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU compress2 RC=[$rc]"  "$USERKEY"
    echo "***<< compress2 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
# mod 2011/05/26 1102086 レイアウト変更対応 Start
#mv     $HULFT_DIR1/qtab_s008000.dat3   $HULFT_DIR1/O.F.QY38.hft
mv     $HULFT_DIR1/qtab_s008000.dat3   $HULFT_DIR1/O.F.QY63.hft
# mod 2011/05/26 1102086 レイアウト変更対応 End
set rc = $status
if $rc != 0 then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU mv5 RC=[$rc]"  "$USERKEY"
    echo "***<< mv5 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
# mod 2011/05/26 1102086 レイアウト変更対応 Start
#utlsend -f OFQY38 -sync
utlsend -f OFQY63 -sync
# mod 2011/05/26 1102086 レイアウト変更対応 End
set rc = $status
if ( $rc != 0 ) then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU utlsend3 RC=[$rc]"  "$USERKEY"
    echo "***<< utlsend3 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
# mod 2011/05/26 1102086 レイアウト変更対応 Start
#mv     $HULFT_DIR1/O.F.QY38.hft        $HULFT_DIR1/qtab_s008000.dat3
mv     $HULFT_DIR1/O.F.QY63.hft        $HULFT_DIR1/qtab_s008000.dat3
# mod 2011/05/26 1102086 レイアウト変更対応 End
if $rc != 0 then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU mv6 RC=[$rc]"  "$USERKEY"
    echo "***<< mv6 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
compress     -f    $HULFT_DIR1/qtab_s008000.dat3
set rc = $status
if $rc != 0 then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU compress3 RC=[$rc]"  "$USERKEY"
    echo "***<< compress3 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
# mod 2011/05/26 1102086 レイアウト変更対応 Start
#mv     $HULFT_DIR1/qtab_s008000.dat4   $HULFT_DIR1/O.F.QY38.hft
mv     $HULFT_DIR1/qtab_s008000.dat4   $HULFT_DIR1/O.F.QY64.hft
# mod 2011/05/26 1102086 レイアウト変更対応 End

set rc = $status
if $rc != 0 then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU mv7 RC=[$rc]"  "$USERKEY"
    echo "***<< mv7 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
# mod 2011/05/26 1102086 レイアウト変更対応 Start
#utlsend -f OFQY38 -sync
utlsend -f OFQY64 -sync
# mod 2011/05/26 1102086 レイアウト変更対応 End
set rc = $status
if ( $rc != 0 ) then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU utlsend4 RC=[$rc]"  "$USERKEY"
    echo "***<< utlsend4 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
# mod 2011/05/26 1102086 レイアウト変更対応 Start
#mv     $HULFT_DIR1/O.F.QY38.hft        $HULFT_DIR1/qtab_s008000.dat4
mv     $HULFT_DIR1/O.F.QY64.hft        $HULFT_DIR1/qtab_s008000.dat4
# mod 2011/05/26 1102086 レイアウト変更対応 End
if $rc != 0 then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU mv8 RC=[$rc]"  "$USERKEY"
    echo "***<< mv8 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
#------------------------------------------------------#
compress     -f    $HULFT_DIR1/qtab_s008000.dat4
set rc = $status
if $rc != 0 then
    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU compress4 RC=[$rc]"  "$USERKEY"
    echo "***<< compress4 ABNORMAL END RC=[$rc] >>***"
    exit(1)
endif
# del 2011/05/26 1102086 レイアウト変更対応 Start
##-------------------------------------------------------#
## 2004/09/28 サブレンジ追加に伴う修正 IMZ.YAMADA -->
##------------------------------------------------------#
#mv     $HULFT_DIR1/qtab_s008000.dat5   $HULFT_DIR1/O.F.QY38.hft
#set rc = $status
#if $rc != 0 then
#    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU mv9 RC=[$rc]"  "$USERKEY"
#    echo "***<< mv9 ABNORMAL END RC=[$rc] >>***"
#    exit(1)
#endif
##------------------------------------------------------#
#utlsend -f OFQY38 -sync
#set rc = $status
#if ( $rc != 0 ) then
#    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU utlsend5 RC=[$rc]"  "$USERKEY"
#    echo "***<< utlsend5 ABNORMAL END RC=[$rc] >>***"
#    exit(1)
#endif
##------------------------------------------------------#
#mv     $HULFT_DIR1/O.F.QY38.hft        $HULFT_DIR1/qtab_s008000.dat5
#if $rc != 0 then
#    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU mvA RC=[$rc]"  "$USERKEY"
#    echo "***<< mvA ABNORMAL END RC=[$rc] >>***"
#    exit(1)
#endif
##------------------------------------------------------#
#compress     -f    $HULFT_DIR1/qtab_s008000.dat5
#set rc = $status
#if $rc != 0 then
#    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU compress5 RC=[$rc]"  "$USERKEY"
#    echo "***<< compress5 ABNORMAL END RC=[$rc] >>***"
#    exit(1)
#endif
##------------------------------------------------------#
#mv     $HULFT_DIR1/qtab_s008000.dat6   $HULFT_DIR1/O.F.QY38.hft
#set rc = $status
#if $rc != 0 then
#    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU mvB RC=[$rc]"  "$USERKEY"
#    echo "***<< mvB ABNORMAL END RC=[$rc] >>***"
#    exit(1)
#endif
##------------------------------------------------------#
#utlsend -f OFQY38 -sync
#set rc = $status
#if ( $rc != 0 ) then
#    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU utlsend6 RC=[$rc]"  "$USERKEY"
#    echo "***<< utlsend6 ABNORMAL END RC=[$rc] >>***"
#    exit(1)
#endif
##------------------------------------------------------#
#mv     $HULFT_DIR1/O.F.QY38.hft        $HULFT_DIR1/qtab_s008000.dat6
#if $rc != 0 then
#    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU mvC RC=[$rc]"  "$USERKEY"
#    echo "***<< mvC ABNORMAL END RC=[$rc] >>***"
#    exit(1)
#endif
##------------------------------------------------------#
#compress     -f    $HULFT_DIR1/qtab_s008000.dat6
#set rc = $status
#if $rc != 0 then
#    $LOGWRITE  "$MODULE"  E  "失敗:$KINOU compress6 RC=[$rc]"  "$USERKEY"
#    echo "***<< compress6 ABNORMAL END RC=[$rc] >>***"
#    exit(1)
#endif
##------------------------------------------------------#
## 2004/09/28 サブレンジ追加に伴う修正 IMZ.YAMADA <--
# del 2011/05/26 1102086 レイアウト変更対応 End

#echo "***<< END > (`date +%y%m%d`/`date +%H%M%S`) >>***"
#
#Added by IMZ.YOSHIDA 2005/08/02 終了ログ出力追加 ==>
$LOGWRITE "$MODULE" I "終了:$KINOU" "$USERKEY"         # 終了メッセージの出力
#Added by IMZ.YOSHIDA 2005/08/02 終了ログ出力追加 <==

exit(0)
