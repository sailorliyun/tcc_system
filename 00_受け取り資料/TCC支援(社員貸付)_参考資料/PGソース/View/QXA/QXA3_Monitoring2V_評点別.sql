CREATE OR REPLACE VIEW QXA3_Monitoring2V AS 
SELECT TO_CHAR(QXA3_SHORIDATE,'yyyy') || 'îN ' ||
	TO_CHAR(QXA3_SHORIDATE,'mm') || 'åé ' ||
	TO_CHAR(QXA3_SHORIDATE,'dd') || 'ì˙' 			AS SHORIDATE,
	DECODE(QXA3_FDSSCORE,
		LEAST(QXA3_FDSSCORE, 50),  '0-50',
		LEAST(QXA3_FDSSCORE, 100), '51-100',
		LEAST(QXA3_FDSSCORE, 150), '101-150',
		LEAST(QXA3_FDSSCORE, 200), '151-200',
		LEAST(QXA3_FDSSCORE, 250), '201-250',
		LEAST(QXA3_FDSSCORE, 300), '251-300',
		LEAST(QXA3_FDSSCORE, 350), '301-350',
		LEAST(QXA3_FDSSCORE, 400), '351-400',
		LEAST(QXA3_FDSSCORE, 450), '401-450',
		LEAST(QXA3_FDSSCORE, 500), '451-500',
		LEAST(QXA3_FDSSCORE, 550), '501-550',
		LEAST(QXA3_FDSSCORE, 600), '551-600',
		LEAST(QXA3_FDSSCORE, 650), '601-650',
		LEAST(QXA3_FDSSCORE, 700), '651-700',
		LEAST(QXA3_FDSSCORE, 750), '701-750',
		LEAST(QXA3_FDSSCORE, 800), '751-800',
		LEAST(QXA3_FDSSCORE, 850), '801-850',
		LEAST(QXA3_FDSSCORE, 900), '851-900',
		LEAST(QXA3_FDSSCORE, 950), '901-950',
		'951-999')									AS SCORE_SCORP,
	QXA3_FDSSCORE									AS FDSSCORE,
	QXA3_SHORITANTO									AS SHORITANTO,
	QXA3_SHORITANTOMEI 								AS SHORITANTOMEI,
	QXA3_DATAREGDATE								AS DATAREGDATE,
	TO_CHAR(QXA3_SHORIDATE,'hh24:mi:ss') 			AS JYUSHINTIME,
	SUBSTR(QXA3_GAIBUKAIINNO, 1, 4) || '-' ||
	SUBSTR(QXA3_GAIBUKAIINNO, 5, 4) || '-' ||
	SUBSTR(QXA3_GAIBUKAIINNO, 9, 4) || '-' ||
	SUBSTR(QXA3_GAIBUKAIINNO, 13, 4)				AS GAIBUKAIINNO,
	QTA1_HONSHIMEIKAN								AS HONSHIMEIKAN,
	DECODE(LENGTH(QXA3_KAMEITENNO), 
		13, 
		SUBSTR(QXA3_KAMEITENNO, 1, 5) || '-'
		|| SUBSTR(QXA3_KAMEITENNO, 6, 2) || '-'
		|| SUBSTR(QXA3_KAMEITENNO, 8, 1) || '-'
		|| SUBSTR(QXA3_KAMEITENNO, 9, 5), 
		QXA3_KAMEITENNO) 							AS KAMEITEN_BANGO, -- ÇPÇRåÖà»è„ÇÃÇ∆Ç´xxxxx-xx-x-xxxxxå`éÆ
	QXA8_KAMEITENMEIKANJI							AS KAMEITENMEIKANJI,
	QXA3_SHORIDATE,
        a.QSA2_MEI AS TAISHO
FROM 	QXA3_MonitoringT, 
	QTA1_KAIINM, 
	QXA8_KameitenInfM,
        (SELECT  QSA2_PRMCODENO,QSA2_MEI FROM QSA2_SCODET WHERE QSA2_PRMCODEKBN='DX2') a
WHERE QXA3_KIGYOUCD		=	QTA1_PRMKIGYOUCD(+)
AND	QXA3_SUBRANGEKEY	=	QTA1_PRMSUBRANGEKEY(+)
AND	QXA3_NAIBUKAIINNO	=	QTA1_PRMNAIBUKAIINNO(+)
AND	QXA3_KAMEITENNO		=	QXA8_KAMEITENNO(+)
AND     QXA3_TAISHO             =       a.QSA2_PRMCODENO(+)
AND QXA3_ERRCODE IS NULL
;
